
\PassOptionsToPackage{check-declarations}{expl3}
\PassOptionsToPackage{enable-debug}{expl3}

\input{regression-test.tex}
\documentclass{article}
\ExplSyntaxOn
\AtBeginDocument{ \debug_on:n {all} }
\ExplSyntaxOff
\usepackage{geometry}
\geometry{
  papersize={9cm,6cm},margin=0.5cm
}
\pagestyle{empty}

\tracingoutput=1\relax

\newcommand\XETEXONLY{%
  \ifdefined\directlua
    \def\NEXT{\TIMO\typeout{*** XeTeX-only test ***}\end{document}\endinput}\fi
  \csname NEXT\endcsname
}
\newcommand\LUATEXONLY{%
  \ifdefined\directlua\else
    \def\NEXT{\TIMO\typeout{*** LuaTeX-only test ***}\end{document}\endinput}\fi
  \csname NEXT\endcsname
}

\newcommand\MSG[1]{%
  \TIMO
  \typeout{#1}%
  \OMIT
}

\newcommand\FONTNAME{%
  \TIMO
  \typeout{\fontname\font}%
  \OMIT
}

\newcommand\SETBOX[2]{%
  \setbox#1=\hbox to 0pt{#2}%
  \ht#1=0pt \dp#1=0pt \wd#1=0pt
}

\newcommand\SHOWBOX[1]{%
  \TIMO
  \scrollmode
  \showbox#1\relax
  \OMIT
}

\newcommand\TESTBOX[2][12]{%
  \SETBOX{#1}{#2}%
  \SHOWBOX{#1}%
}

\makeatletter
\newcommand\CURRNFSS{%
  \TIMO
  \typeout{\curr@fontshape:^^J\space\space\fontname\font}%
  \OMIT
}
\makeatother

\AtBeginDocument{\def\=========================={%
  \TIMO
  \SEPARATOR
  \OMIT
}}

\newbox\TESTBOX
\newenvironment{fstest}
  {%
   \begingroup
   \TIMO
  }
  {%
   \clearpage
   \OMIT
   \endgroup
  }

\AtBeginDocument{\START\OMIT}

\AtEndDocument{\OMIT}
